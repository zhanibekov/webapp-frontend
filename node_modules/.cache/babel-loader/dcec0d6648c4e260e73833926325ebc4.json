{"ast":null,"code":"import _objectSpread from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import Typography from'@mui/material/Typography';import TextField from'@mui/material/TextField';import Paper from'@mui/material/Paper';import Button from'@mui/material/Button';import Avatar from'@mui/material/Avatar';import{fetchRegister,fetchUserData,selectIsAuth}from\"../../redux/slices/Auth\";import{useDispatch,useSelector}from'react-redux';import{useForm}from'react-hook-form';import{Navigate}from'react-router-dom';import styles from'./Login.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Registration=function Registration(){var _errors$fullName,_errors$fullName2,_errors$email,_errors$email2,_errors$password,_errors$password2;var isAuth=useSelector(selectIsAuth);var dispatch=useDispatch();var _useForm=useForm({defaultValues:{fullName:'Жунисали Еламан',email:'elamanzhanibekov@gmail.com',password:'870536505345'},mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchRegister(values));case 2:data=_context.sent;if(data.payload){_context.next=5;break;}return _context.abrupt(\"return\",alert('Не удалось зарегистрироваться'));case 5:if('token'in data.payload){window.localStorage.setItem('token',data.payload.token);}console.log(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(Paper,{classes:{root:styles.root},children:[/*#__PURE__*/_jsx(Typography,{classes:{root:styles.title},variant:\"h5\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.avatar,children:/*#__PURE__*/_jsx(Avatar,{sx:{width:100,height:100}})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({error:Boolean((_errors$fullName=errors.fullName)===null||_errors$fullName===void 0?void 0:_errors$fullName.message),type:\"fullName\",helperText:(_errors$fullName2=errors.fullName)===null||_errors$fullName2===void 0?void 0:_errors$fullName2.message},register('fullName',{required:'Укажите полное имя'})),{},{className:styles.field,label:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\",fullWidth:true})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),type:\"email\",helperText:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message},register('email',{required:'Укажите почту'})),{},{className:styles.field,label:\"E-Mail\",fullWidth:true})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({error:Boolean((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message),type:\"password\",helperText:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message},register('password',{required:'Укажите пароль'})),{},{className:styles.field,label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",fullWidth:true})),/*#__PURE__*/_jsx(Button,{disabled:!isValid,type:\"submit\",variant:\"contained\",fullWidth:true,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})]});};","map":{"version":3,"names":["React","Typography","TextField","Paper","Button","Avatar","fetchRegister","fetchUserData","selectIsAuth","useDispatch","useSelector","useForm","Navigate","styles","Registration","isAuth","dispatch","defaultValues","fullName","email","password","mode","register","handleSubmit","formState","errors","isValid","onSubmit","values","data","payload","alert","window","localStorage","setItem","token","console","log","root","title","avatar","width","height","Boolean","message","required","field"],"sources":["/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/src/pages/Registration/index.jsx"],"sourcesContent":["import React from 'react';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport Paper from '@mui/material/Paper';\nimport Button from '@mui/material/Button';\nimport Avatar from '@mui/material/Avatar';\nimport { fetchRegister, fetchUserData, selectIsAuth } from \"../../redux/slices/Auth\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport {Navigate} from 'react-router-dom'\n\nimport styles from './Login.module.scss';\n\nexport const Registration = () => {\n  const isAuth = useSelector(selectIsAuth)\n  const dispatch = useDispatch();\n  const {register, handleSubmit, formState:{errors, isValid}} = useForm({\n    defaultValues : {\n      fullName: 'Жунисали Еламан',\n      email: 'elamanzhanibekov@gmail.com',\n      password: '870536505345',\n    },\n    mode: 'onChange',\n  });\n\n  const onSubmit = async(values) => {\n    const data = await dispatch(fetchRegister(values));\n    if(!data.payload) {\n      return alert('Не удалось зарегистрироваться')\n    }\n   if('token' in data.payload) {\n    window.localStorage.setItem('token', data.payload.token);\n   }\n   console.log(data);\n  }\n \n    if(isAuth) {\n      return <Navigate  to={'/'}/>;\n    }\n  return (\n    <Paper classes={{ root: styles.root }}>\n      <Typography classes={{ root: styles.title }} variant=\"h5\">\n        Создание аккаунта\n      </Typography>\n      <div className={styles.avatar}>\n        <Avatar sx={{ width: 100, height: 100 }} />\n      </div>\n      <form onSubmit={handleSubmit(onSubmit)}>\n\n      <TextField error={Boolean(errors.fullName?.message)}\n         type='fullName' helperText={errors.fullName?.message}\n        {...register('fullName',{required: 'Укажите полное имя'})} className={styles.field} label=\"Полное имя\" fullWidth />\n\n\n      <TextField error={Boolean(errors.email?.message)}\n         type='email' helperText={errors.email?.message}\n        {...register('email',{required: 'Укажите почту'})} className={styles.field} label=\"E-Mail\" fullWidth />\n\n\n      <TextField error={Boolean(errors.password?.message)}\n        type='password' helperText={errors.password?.message}\n        {...register('password',{required: 'Укажите пароль'})} className={styles.field} label=\"Пароль\" fullWidth />\n\n\n      <Button disabled={!isValid} type='submit' variant=\"contained\" fullWidth>\n        Зарегистрироваться\n      </Button>\n\n      </form>\n    </Paper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}