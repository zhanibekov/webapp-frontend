{"ast":null,"code":"import _defineProperty from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";export var fetchPosts=createAsyncThunk('posts/fetchPosts',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/posts\"));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);})));export var fetchTags=createAsyncThunk('posts/fetchTags',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/tags\"));case 2:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;return _context2.abrupt(\"return\",data);case 5:case\"end\":return _context2.stop();}}},_callee2);})));export var fetchRemovePosts=createAsyncThunk('posts/fetchRemovePosts',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var _yield$axios$delete,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/posts/\").concat(id));case 2:_yield$axios$delete=_context3.sent;data=_yield$axios$delete.data;return _context3.abrupt(\"return\",data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}());var initialState={posts:{items:[],status:'loading'},tags:{items:[],status:'loading'}};var postsSlice=createSlice({name:'posts',initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchPosts.pending,function(state){state.posts.items=[];state.posts.status='loading';}),_defineProperty(_extraReducers,fetchPosts.fulfilled,function(state,action){state.posts.items=action.payload;state.posts.status='loaded';}),_defineProperty(_extraReducers,fetchPosts.rejected,function(state){state.posts.items=[];state.posts.status='error';}),_defineProperty(_extraReducers,fetchTags.pending,function(state){state.tags.items=[];state.tags.status='loading';}),_defineProperty(_extraReducers,fetchTags.fulfilled,function(state,action){state.tags.items=action.payload;state.tags.status='loaded';}),_defineProperty(_extraReducers,fetchTags.rejected,function(state){state.tags.items=[];state.tags.status='error';}),_defineProperty(_extraReducers,fetchRemovePosts.pending,function(state,action){state.posts.items=state.posts.items.filter(function(obj){return obj._id!=action.meta.arg;});}),_extraReducers)});export var postsReducer=postsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchPosts","get","process","env","REACT_APP_API_URL","data","fetchTags","fetchRemovePosts","id","delete","initialState","posts","items","status","tags","postsSlice","name","reducers","extraReducers","pending","state","fulfilled","action","payload","rejected","filter","obj","_id","meta","arg","postsReducer","reducer"],"sources":["/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/src/redux/slices/Posts.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchPosts = createAsyncThunk('posts/fetchPosts', async() => {\n    const { data } = await axios.get(`${process.env.REACT_APP_API_URL}/posts`);\n    return data;\n})\n\nexport const fetchTags = createAsyncThunk('posts/fetchTags', async() => {\n    const { data } = await axios.get(`${process.env.REACT_APP_API_URL}/tags`);\n    return data;\n})\n\nexport const fetchRemovePosts = createAsyncThunk('posts/fetchRemovePosts', async(id) => {\n    const { data } = await axios.delete(`${process.env.REACT_APP_API_URL}/posts/${id}`);\n    return data;\n})\n\nconst initialState = {\n    posts: {\n        items: [],\n        status: 'loading',\n    },\n    tags: {\n        items: [],\n        status: 'loading'\n    },\n}\n\nconst postsSlice = createSlice({\n    name: 'posts',\n    initialState,\n    reducers: {},\n    extraReducers: {\n        ////Получение статей\n        [fetchPosts.pending]: (state) => {\n            state.posts.items = [];\n            state.posts.status = 'loading';\n        },\n        [fetchPosts.fulfilled]: (state, action) => {\n            state.posts.items = action.payload;\n            state.posts.status = 'loaded';\n\n        },\n\n        [fetchPosts.rejected]: (state) => {\n            state.posts.items = [];\n            state.posts.status = 'error';\n\n        },\n        ///Получение тэгов\n        [fetchTags.pending]: (state) => {\n            state.tags.items = [];\n            state.tags.status = 'loading';\n        },\n        [fetchTags.fulfilled]: (state, action) => {\n            state.tags.items = action.payload;\n            state.tags.status = 'loaded';\n\n        },\n\n        [fetchTags.rejected]: (state) => {\n            state.tags.items = [];\n            state.tags.status = 'error';\n\n        },\n        ///Удаление статей\n        [fetchRemovePosts.pending]: (state, action) => {\n            state.posts.items = state.posts.items.filter(obj => obj._id != action.meta.arg);\n        }\n    }\n});\nexport const postsReducer = postsSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}