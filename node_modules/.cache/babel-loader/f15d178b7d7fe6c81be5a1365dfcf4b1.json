{"ast":null,"code":"import _defineProperty from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";export var fetchUserData=createAsyncThunk('auth/fetchUserData',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/login\"),params);case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var fetchRegister=createAsyncThunk('auth/fetchRegister',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(params){var _yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/register\"),params);case 2:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;return _context2.abrupt(\"return\",data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var fetchAuthMe=createAsyncThunk('auth/fetchAuthMe',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/me\"),{headers:{Authorization:localStorage.getItem(\"token\")}});case 2:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;return _context3.abrupt(\"return\",data);case 5:case\"end\":return _context3.stop();}}},_callee3);})));var initialState={data:null,status:'loading'};var authSlice=createSlice({name:'auth',initialState:initialState,reducers:{logout:function logout(state){state.data=null;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchUserData.pending,function(state){state.status='loading';state.data=null;}),_defineProperty(_extraReducers,fetchUserData.fulfilled,function(state,action){state.status='loaded';state.data=action.payload;}),_defineProperty(_extraReducers,fetchUserData.rejected,function(state){state.status='error';state.data=null;}),_defineProperty(_extraReducers,fetchAuthMe.pending,function(state){state.status='loading';state.data=null;}),_defineProperty(_extraReducers,fetchAuthMe.fulfilled,function(state,action){state.status='loaded';state.data=action.payload;}),_defineProperty(_extraReducers,fetchAuthMe.rejected,function(state){state.status='error';state.data=null;}),_defineProperty(_extraReducers,fetchRegister.pending,function(state){state.status='loading';state.data=null;}),_defineProperty(_extraReducers,fetchRegister.fulfilled,function(state,action){state.status='loaded';state.data=action.payload;}),_defineProperty(_extraReducers,fetchRegister.rejected,function(state){state.status='error';state.data=null;}),_extraReducers)});export var selectIsAuth=function selectIsAuth(state){return Boolean(state.auth.data);};export var authReducer=authSlice.reducer;var logout=authSlice.actions.logout;export{logout};","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchUserData","params","post","process","env","REACT_APP_API_URL","data","fetchRegister","fetchAuthMe","get","headers","Authorization","localStorage","getItem","initialState","status","authSlice","name","reducers","logout","state","extraReducers","pending","fulfilled","action","payload","rejected","selectIsAuth","Boolean","auth","authReducer","reducer","actions"],"sources":["/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/src/redux/slices/Auth.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nexport const fetchUserData = createAsyncThunk('auth/fetchUserData', async(params) => {\n    const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/login`, params);\n    return data\n});\n\nexport const fetchRegister = createAsyncThunk('auth/fetchRegister', async(params) => {\n    const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/register`, params);\n    return data\n});\n\nexport const fetchAuthMe = createAsyncThunk('auth/fetchAuthMe', async() => {\n    const { data } = await axios.get(`${process.env.REACT_APP_API_URL}/auth/me`, {\n        headers: {\n            Authorization: localStorage.getItem(\"token\"),\n        },\n    });\n    return data;\n});\n\nconst initialState = {\n    data: null,\n    status: 'loading'\n};\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        logout: (state) => {\n            state.data = null\n        },\n    },\n    extraReducers: {\n        [fetchUserData.pending]: (state) => {\n            state.status = 'loading';\n            state.data = null;\n        },\n        [fetchUserData.fulfilled]: (state, action) => {\n            state.status = 'loaded';\n            state.data = action.payload;\n\n        },\n\n        [fetchUserData.rejected]: (state) => {\n            state.status = 'error';\n            state.data = null;\n\n        },\n        [fetchAuthMe.pending]: (state) => {\n            state.status = 'loading';\n            state.data = null;\n        },\n        [fetchAuthMe.fulfilled]: (state, action) => {\n            state.status = 'loaded';\n            state.data = action.payload;\n\n        },\n\n        [fetchAuthMe.rejected]: (state) => {\n            state.status = 'error';\n            state.data = null;\n\n        },\n\n        [fetchRegister.pending]: (state) => {\n            state.status = 'loading';\n            state.data = null;\n        },\n        [fetchRegister.fulfilled]: (state, action) => {\n            state.status = 'loaded';\n            state.data = action.payload;\n\n        },\n\n        [fetchRegister.rejected]: (state) => {\n            state.status = 'error';\n            state.data = null;\n\n        }\n    }\n});\nexport const selectIsAuth = state => Boolean(state.auth.data);\nexport const authReducer = authSlice.reducer;\nexport const { logout } = authSlice.actions;"],"mappings":"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"},"metadata":{},"sourceType":"module"}