{"ast":null,"code":"import _objectSpread from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import Typography from\"@mui/material/Typography\";import TextField from\"@mui/material/TextField\";import Paper from\"@mui/material/Paper\";import Button from\"@mui/material/Button\";import styles from\"./Login.module.scss\";import{useForm}from'react-hook-form';import{useDispatch,useSelector}from'react-redux';import{fetchUserData,selectIsAuth}from\"../../redux/slices/Auth\";import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var _errors$email,_errors$email2,_errors$password,_errors$password2;var isAuth=useSelector(selectIsAuth);var dispatch=useDispatch();var _useForm=useForm({defaultValues:{email:'elamanzhanibekov@gmail.com',password:'870536505345'},mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid;console.log(isAuth);var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchUserData(values));case 2:data=_context.sent;if(data.payload){_context.next=5;break;}return _context.abrupt(\"return\",alert('Не удалось авторизоваться'));case 5:if('token'in data.payload){window.localStorage.setItem('token',data.payload.token);}console.log(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();if(isAuth){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(Paper,{classes:{root:styles.root},children:[/*#__PURE__*/_jsx(Typography,{classes:{root:styles.title},variant:\"h5\",children:\"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:styles.field,label:\"E-Mail\",type:\"email\",error:Boolean((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message),helperText:(_errors$email2=errors.email)===null||_errors$email2===void 0?void 0:_errors$email2.message},register('email',{required:'Укажите почту'})),{},{fullWidth:true})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({className:styles.field,label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",error:Boolean((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message),helperText:(_errors$password2=errors.password)===null||_errors$password2===void 0?void 0:_errors$password2.message},register('password',{required:'Укажите пароль'})),{},{fullWidth:true})),/*#__PURE__*/_jsx(Button,{disabled:!isValid,type:\"submit\",size:\"large\",variant:\"contained\",fullWidth:true,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});};","map":{"version":3,"names":["React","Typography","TextField","Paper","Button","styles","useForm","useDispatch","useSelector","fetchUserData","selectIsAuth","Navigate","Login","isAuth","dispatch","defaultValues","email","password","mode","register","handleSubmit","formState","errors","isValid","console","log","onSubmit","values","data","payload","alert","window","localStorage","setItem","token","root","title","field","Boolean","message","required"],"sources":["/Users/elamanzanibekov/Documents/GitHub/webapp-frontend/src/pages/Login/index.jsx"],"sourcesContent":["import React from \"react\";\nimport Typography from \"@mui/material/Typography\";\nimport TextField from \"@mui/material/TextField\";\nimport Paper from \"@mui/material/Paper\";\nimport Button from \"@mui/material/Button\";\nimport styles from \"./Login.module.scss\";\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchUserData, selectIsAuth } from \"../../redux/slices/Auth\";\nimport {Navigate} from 'react-router-dom'\n\nexport const Login = () => {\n  const isAuth = useSelector(selectIsAuth)\n  const dispatch = useDispatch();\n  const {register, handleSubmit, formState:{errors, isValid}} = useForm({\n    defaultValues : {\n      email: 'elamanzhanibekov@gmail.com',\n      password: '870536505345',\n    },\n    mode: 'onChange',\n  });\n  console.log(isAuth);\n\n  const onSubmit = async(values) => {\n    const data = await dispatch(fetchUserData(values));\n    if(!data.payload) {\n      return alert('Не удалось авторизоваться')\n    }\n   if('token' in data.payload) {\n    window.localStorage.setItem('token', data.payload.token);\n   }\n   console.log(data);\n  }\n \n    if(isAuth) {\n      return <Navigate  to={'/'}/>;\n    }\n\n  return (\n    <Paper classes={{ root: styles.root }}>\n      <Typography classes={{ root: styles.title }} variant=\"h5\">\n        Вход в аккаунт\n      </Typography>\n      <form onSubmit={handleSubmit(onSubmit)}>\n      <TextField\n        className={styles.field}\n        label=\"E-Mail\"\n        type=\"email\"\n        error={Boolean(errors.email?.message)}\n        helperText={errors.email?.message}\n        {...register('email',{required: 'Укажите почту'})}\n        fullWidth\n      />\n      <TextField className={styles.field} label=\"Пароль\" \n      error={Boolean(errors.password?.message)}\n      helperText={errors.password?.message}\n      {...register('password',{required: 'Укажите пароль'})}\n      fullWidth />\n      <Button disabled={!isValid} type=\"submit\" size=\"large\" variant=\"contained\" fullWidth>\n        Войти\n      </Button>\n      </form>\n    </Paper>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}